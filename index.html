<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Simple calendar by excid3</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Simple calendar</h1>
          <h2>A wonderfully simple calendar gem for Rails</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/excid3/simple_calendar/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/excid3/simple_calendar/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/excid3/simple_calendar" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <p><img src="https://travis-ci.org/excid3/simple_calendar.svg?branch=2.0" alt="travis ci"></p>

<h1>
<a id="simple-calendar" class="anchor" href="#simple-calendar" aria-hidden="true"><span class="octicon octicon-link"></span></a>Simple Calendar</h1>

<p>Simple Calendar is designed to do one thing really really well: render a
calendar. It lets you render a calendar of any size. Maybe you want a
day view, a 4 day agenda, a week view, a month view, or a 6 week
calendar. You can do all of that with the new gem, just give it a range
of dates to render.</p>

<p>It doesn't depend on any ORM so you're free to use it with ActiveRecord,
Mongoid, any other ORM, or pure Ruby objects.</p>

<p>Thanks to all contributors for your wonderful help!</p>

<p><img src="https://s3.amazonaws.com/f.cl.ly/items/1T0t1s0W212d28282V2M/Screen%20Shot%202013-03-28%20at%209.44.49%20AM.png" alt="calendar"></p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>Just add this into your Gemfile followed by a bundle install:</p>

<pre><code>gem "simple_calendar", "~&gt; 2.0"
</code></pre>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>Generating calendars is extremely simple with simple_calendar.</p>

<p>The first parameter is a symbol that looks up the current date in
<code>params</code>. If no date is found, it will use the current date.</p>

<p>In these examples, we're using <code>:start_date</code> which is the default.</p>

<h3>
<a id="month-calendar" class="anchor" href="#month-calendar" aria-hidden="true"><span class="octicon octicon-link"></span></a>Month Calendar</h3>

<p>You can generate a calendar for the month with the <code>month_calendar</code>
method.</p>

<div class="highlight highlight-erb"><pre><span class="pl-pse">&lt;%=</span><span class="pl-s1"> month_calendar <span class="pl-k">do </span>|<span class="pl-smi">date</span>| </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span>
  <span class="pl-pse">&lt;%=</span><span class="pl-s1"> date </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span>
<span class="pl-pse">&lt;%</span><span class="pl-s1"> <span class="pl-k">end</span> </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span></pre></div>

<h3>
<a id="week-calendar" class="anchor" href="#week-calendar" aria-hidden="true"><span class="octicon octicon-link"></span></a>Week Calendar</h3>

<p>You can generate a week calendar with the <code>week_calendar</code> method.</p>

<div class="highlight highlight-erb"><pre><span class="pl-pse">&lt;%=</span><span class="pl-s1"> week_calendar <span class="pl-c1">number_of_weeks:</span> <span class="pl-c1">2</span> <span class="pl-k">do </span>|<span class="pl-smi">date</span>| </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span>
  <span class="pl-pse">&lt;%=</span><span class="pl-s1"> date </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span>
<span class="pl-pse">&lt;%</span><span class="pl-s1"> <span class="pl-k">end</span> </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span></pre></div>

<p>Setting <code>number_of_weeks</code> is optional and defaults to 1.</p>

<h3>
<a id="custom-length-calendar" class="anchor" href="#custom-length-calendar" aria-hidden="true"><span class="octicon octicon-link"></span></a>Custom Length Calendar</h3>

<p>You can generate calendars of any length by passing in the number of days you want to render.</p>

<div class="highlight highlight-erb"><pre><span class="pl-pse">&lt;%=</span><span class="pl-s1"> calendar <span class="pl-c1">number_of_days:</span> <span class="pl-c1">4</span> <span class="pl-k">do </span>|<span class="pl-smi">date</span>| </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span>
  <span class="pl-pse">&lt;%=</span><span class="pl-s1"> date </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span>
<span class="pl-pse">&lt;%</span><span class="pl-s1"> <span class="pl-k">end</span> </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span></pre></div>

<p>Setting <code>number_of_days</code> is optional and defaults to 4.</p>

<h2>
<a id="rendering-events" class="anchor" href="#rendering-events" aria-hidden="true"><span class="octicon octicon-link"></span></a>Rendering Events</h2>

<p>What's a calendar without events in it? There are two simple steps for creating
calendars with events.</p>

<p>The first step is to add the following to your model. We'll be using a
model called Meeting, but you can add this to any model or Ruby object.</p>

<p>Here's an example model:</p>

<div class="highlight highlight-bash"><pre>rails g scaffold Meeting name start_time:datetime</pre></div>

<p>By default it uses <code>start_time</code> as the attribute name.</p>

<p><strong>If you'd like to use another attribute other than start_time, just
pass it in as the <code>attribute</code> option</strong></p>

<div class="highlight highlight-erb"><pre><span class="pl-pse">&lt;%=</span><span class="pl-s1"> month_calendar(<span class="pl-c1">attribute:</span> <span class="pl-c1">:starts_at</span>) <span class="pl-k">do </span>|<span class="pl-smi">date</span>| </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span>
  <span class="pl-pse">&lt;%=</span><span class="pl-s1"> day </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span>
<span class="pl-pse">&lt;%</span><span class="pl-s1"> <span class="pl-k">end</span> </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span></pre></div>

<p>In your controller, query for these meetings and store them in an instance
variable. Normally you'll want to search for the ones that only show up
inside the calendar view (for example, you may only want to grab the events for
the current month).</p>

<p>We'll just load up all the meetings for this example.</p>

<div class="highlight highlight-ruby"><pre><span class="pl-k">def</span> <span class="pl-en">index</span>
  <span class="pl-smi">@meetings</span> <span class="pl-k">=</span> <span class="pl-c1">Meeting</span>.all
<span class="pl-k">end</span></pre></div>

<p>Then in your view, you can pass in the <code>events</code> option to render. The
meetings will automatically be filtered out by day for you.</p>

<div class="highlight highlight-erb"><pre><span class="pl-pse">&lt;%=</span><span class="pl-s1"> month_calendar <span class="pl-c1">events:</span> <span class="pl-smi">@meetings</span> <span class="pl-k">do </span>|<span class="pl-smi">date</span>, <span class="pl-smi">meetings</span>| </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span>
  <span class="pl-pse">&lt;%=</span><span class="pl-s1"> date </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span>

  <span class="pl-pse">&lt;%</span><span class="pl-s1"> meetings.each <span class="pl-k">do </span>|<span class="pl-smi">meeting</span>| </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span>
    &lt;<span class="pl-ent">div</span>&gt;
      <span class="pl-pse">&lt;%=</span><span class="pl-s1"> meeting.name </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span>
    &lt;/<span class="pl-ent">div</span>&gt;
  <span class="pl-pse">&lt;%</span><span class="pl-s1"> <span class="pl-k">end</span> </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span>
<span class="pl-pse">&lt;%</span><span class="pl-s1"> <span class="pl-k">end</span> </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span></pre></div>

<p>If you pass in objects that don't respond to the attribute method (like
starts_at), then all the meetings will be yielded each day. This lets you
do custom filtering however you want.</p>

<h2>
<a id="customizing-the-calendar" class="anchor" href="#customizing-the-calendar" aria-hidden="true"><span class="octicon octicon-link"></span></a>Customizing The Calendar</h2>

<p>There are a handful of configuration options that you can use in
simple_calendar.</p>

<h3>
<a id="customizing-views" class="anchor" href="#customizing-views" aria-hidden="true"><span class="octicon octicon-link"></span></a>Customizing Views</h3>

<p>You can customize the layouts for each of the calendars by running the
generators for simple_calendar:</p>

<div class="highlight highlight-bash"><pre>rails g simple_calendar:views</pre></div>

<p>This will generate a folder in app/views called simple_calendar that you
edit to your heart's desire.</p>

<h3>
<a id="time-zones" class="anchor" href="#time-zones" aria-hidden="true"><span class="octicon octicon-link"></span></a>Time Zones</h3>

<p>Setting <code>Time.zone</code> will make sure the calendar start days are correctly computed
in the right timezone. You can set this globally in your <code>application.rb</code> file or
if you have a User model with a time_zone attribute, you can set it on every request by using
a before_filter like the following example.</p>

<p>This code example uses <a href="https://github.com/plataformatec/devise">Devise</a>'s
<code>current_user</code> and <code>user_signed_in?</code> methods to retrieve the user's timezone and set it for the duration of the request.
Make sure to change the <code>:user_signed_in?</code> and <code>current_user</code> methods if you are
using some other method of authentication.</p>

<div class="highlight highlight-ruby"><pre><span class="pl-k">class</span> <span class="pl-en">ApplicationController<span class="pl-e"> &lt; ActionController::Base</span></span>
  before_filter <span class="pl-c1">:set_time_zone</span>, <span class="pl-c1">if:</span> <span class="pl-c1">:user_signed_in?</span>

  <span class="pl-k">private</span>

    <span class="pl-k">def</span> <span class="pl-en">set_time_zone</span>
      <span class="pl-c1">Time</span>.zone <span class="pl-k">=</span> current_user.time_zone
    <span class="pl-k">end</span>
<span class="pl-k">end</span></pre></div>

<p>If you want to set the time zone globally, you can set the following in
<code>config/application.rb</code>:</p>

<div class="highlight highlight-ruby"><pre>config.time_zone <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Central Time (US &amp; Canada)<span class="pl-pds">'</span></span></pre></div>

<h3>
<a id="beginning-of-week" class="anchor" href="#beginning-of-week" aria-hidden="true"><span class="octicon octicon-link"></span></a>Beginning Of Week</h3>

<p>You can also change the beginning day of the week by setting
<code>Date.beginning_of_week</code> in a <code>before_filter</code> just like in the previous
example. If you want to set this globally, you can put this line in
<code>config/application.rb</code>:</p>

<div class="highlight highlight-ruby"><pre>config.beginning_of_week <span class="pl-k">=</span> <span class="pl-c1">:sunday</span></pre></div>

<h3>
<a id="custom-css-classes" class="anchor" href="#custom-css-classes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Custom CSS Classes</h3>

<p>Setting classes on the table and elements are pretty easy.</p>

<p>You can simply run the following command to install the calendar views
and then add your own helpers to the table, rows, headers, and days.</p>

<p>simple_calendar comes with a handful of useful classes for each day in
the calendar that you can use:</p>

<div class="highlight highlight-scss"><pre><span class="pl-e">.simple-calendar</span> {
  <span class="pl-e">.day</span> {}

  <span class="pl-e">.wday-0</span> {}
  <span class="pl-e">.wday-1</span> {}
  <span class="pl-e">.wday-2</span> {}
  <span class="pl-e">.wday-3</span> {}
  <span class="pl-e">.wday-4</span> {}
  <span class="pl-e">.wday-5</span> {}
  <span class="pl-e">.wday-6</span> {}

  <span class="pl-e">.today</span> {}
  <span class="pl-e">.past</span> {}
  <span class="pl-e">.future</span> {}

  <span class="pl-e">.start-date</span> {}

  <span class="pl-e">.prev-month</span> {}
  <span class="pl-e">.next-month</span> { }
  <span class="pl-e">.current-month</span> {}

  <span class="pl-e">.has-events</span> {}
}</pre></div>

<p>Just paste this into a CSS file and add your styles and they will be
applied to the calendar. All of these classes are inside of the
simple-calendar class so you can scope your own classes with similar
names.</p>

<h3>
<a id="custom-header-title-and-links" class="anchor" href="#custom-header-title-and-links" aria-hidden="true"><span class="octicon octicon-link"></span></a>Custom Header Title And Links</h3>

<p>Header and title links are easily adjusted by generating views and
modifying them inside your application.</p>

<p>For example, if you'd like to use abbreviated month names, you can modify
the views from this:</p>

<div class="highlight highlight-erb"><pre><span class="pl-pse">&lt;%=</span><span class="pl-s1"> <span class="pl-c1">I18n</span>.t(<span class="pl-s"><span class="pl-pds">"</span>date.month_names<span class="pl-pds">"</span></span>)[start_date.month] </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span> <span class="pl-pse">&lt;%=</span><span class="pl-s1"> start_date.year </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span></pre></div>

<p>To</p>

<div class="highlight highlight-erb"><pre><span class="pl-pse">&lt;%=</span><span class="pl-s1"> <span class="pl-c1">I18n</span>.t(<span class="pl-s"><span class="pl-pds">"</span>date.abbr_month_names<span class="pl-pds">"</span></span>)[start_date.month] </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span> <span class="pl-pse">&lt;%=</span><span class="pl-s1"> start_date.year </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span></pre></div>

<p>Your calendar will now display "Sep 2015" instead of "September 2015" at
the top! :)</p>

<h3>
<a id="ajax-calendars" class="anchor" href="#ajax-calendars" aria-hidden="true"><span class="octicon octicon-link"></span></a>AJAX Calendars</h3>

<p>Rendering calendars that update with AJAX is pretty simple. You'll need
to wrap your calendar in a div, overwrite the <code>next_link</code> and <code>previous_link</code> options, and setup your
controller to respond to JS requests. The response can simply replace
the HTML of the div with the newly rendered calendar.</p>

<p>Take a look at <strong><a href="https://github.com/excid3/simple_calendar-ajax-example">excid3/simple_calendar-ajax-example</a></strong> to see how it is done.</p>

<h2>
<a id="custom-calendars" class="anchor" href="#custom-calendars" aria-hidden="true"><span class="octicon octicon-link"></span></a>Custom Calendars</h2>

<p>The three main calendars available should take care of most of your
needs, but simple_calendar makes it easy to create completely custom
calendars (like maybe you only want business weeks).</p>

<p>If you'd like to make a completely custom calendar, you can create a new
class that inherits from <code>SimpleCalendar::Calendar</code>. The name you give
it will correspond to the name of the template it will try to render.</p>

<p>The main method you'll need to implement is the <code>date_range</code> so that
your calendar can have a custom length.</p>

<pre><code>class SimpleCalendar::BusinessWeekCalendar
  private

    def date_range
      beginning = start_date.beginning_of_week + 1.day
      ending    = start_date.end_of_week - 1.day
      (beginning..ending)
    end
end
</code></pre>

<p>To render this in the view, you can do:</p>

<div class="highlight highlight-erb"><pre><span class="pl-pse">&lt;%=</span><span class="pl-s1"> <span class="pl-c1">SimpleCalendar</span>::<span class="pl-c1">BusinessWeekCalendar</span>.<span class="pl-k">new</span>(<span class="pl-v">self</span>).render <span class="pl-k">do </span>|<span class="pl-smi">date</span>| </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span>
  <span class="pl-pse">&lt;%=</span><span class="pl-s1"> day </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span>
<span class="pl-pse">&lt;%</span><span class="pl-s1"> <span class="pl-k">end</span> </span><span class="pl-pse"><span class="pl-s1">%</span>&gt;</span></pre></div>

<p>And this will render the
<code>app/views/simple_calendar/_business_week_calendar.html.erb</code> partial.</p>

<p>You can copy one of the existing templates to use for the partial for
your new calendar.</p>

<h2>
<a id="view-specs-and-tests" class="anchor" href="#view-specs-and-tests" aria-hidden="true"><span class="octicon octicon-link"></span></a>View Specs and Tests</h2>

<p>If you're running view specs against views with calendars, you may run into route generation errors like the following:</p>

<pre><code>Failure/Error: render
ActionView::Template::Error:
  No route matches {:action=&gt;"show", :controller=&gt;"controller_name", :start_date=&gt;Sun, 29 Mar 2015}
</code></pre>

<p>If so, you can stub out the appropriate method like so (rspec 3 and up):</p>

<pre><code>expect_any_instance_of(SimpleCalendar::Calendar).to receive(:link_to).at_least(:once).and_return("")
</code></pre>

<p>With modifications as appropriate.</p>

<h2>
<a id="todo" class="anchor" href="#todo" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO</h2>

<ul>
<li>Multi-day events</li>
<li>Rspec tests for Calendar</li>
<li>Rspec tests for MonthCalendar</li>
<li>Rspec tests for WeekCalendar</li>
</ul>

<h2>
<a id="author" class="anchor" href="#author" aria-hidden="true"><span class="octicon octicon-link"></span></a>Author</h2>

<p>Chris Oliver <a href="mailto:chris@gorails.com">chris@gorails.com</a></p>

<p><a href="https://gorails.com">https://gorails.com</a></p>

<p><a href="https://twitter.com/excid3">@excid3</a></p>

<h2>
<a id="support" class="anchor" href="#support" aria-hidden="true"><span class="octicon octicon-link"></span></a>Support</h2>

<p>Need help</p>
        </section>

        <footer>
          Simple calendar is maintained by <a href="https://github.com/excid3">excid3</a><br>
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>
